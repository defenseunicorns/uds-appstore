# Schema

Schema defined and generated by small go app, run gen.sh

# Example package

Example of how its currently possible to include metadata with the package directly in it's oci artifact, retrieving the metadata can be done via crane/tar:

```sh
crane blob ghcr.io/corang/test/uds-metadata-test@sha256:8107309b1da99618a23081aba34ee90ce90e9c111557a87d560d490fa3778f35 | tar -Ox uds-metadata/files/0/marketplace.json
```

this is also organically discoverable without needing to know hashes, just tags which can be derived from github releases:

```sh
MANIFEST_SHA=$(crane manifest ghcr.io/corang/test/uds-metadata-test:0.1.0 \
        | jq -r '.manifests[0].digest'
    )

BLOB_SHA=$(crane manifest ghcr.io/corang/test/uds-metadata-test@${MANIFEST_SHA} \
        | jq -r '.layers[] | select(.annotations."org.opencontainers.image.title"=="components/uds-metadata.tar") | .digest'
    )
crane blob ghcr.io/corang/test/uds-metadata-test@${BLOB_SHA} \
    | tar -Ox uds-metadata/files/0/marketplace.json
```
